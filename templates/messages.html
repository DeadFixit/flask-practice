{% extends 'base.html' %}
{% block content %}
<section class="page-header">
    <h1>Полученные сообщения</h1>
    <p class="lead">Доступно только авторизованным пользователям (роли: admin, editor).</p>
</section>
{% if messages %}
    <div class="card-list two">
        {% for item in messages %}
            <article class="card">
                <h2>{{ item.name }} <span class="small">({{ item.email }})</span></h2>
                <div class="meta">{{ item.created }}</div>
                <p>{{ item.message }}</p>
                {% if current_user.role == 'admin' %}
                    <form method="post" action="{{ url_for('delete_message', message_id=loop.index0) }}" onsubmit="return confirm('Удалить сообщение?');">
                        <button type="submit" class="secondary">Удалить</button>
                    </form>
                {% endif %}
            </article>
        {% endfor %}
    </div>
{% else %}
    <p>Новых сообщений пока нет.</p>
{% endif %}
{% endblock %}
