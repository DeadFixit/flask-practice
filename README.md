# City Green Hub

Портал о зелёной инфраструктуре города, реализованный на Flask. Сайт включает стандартную и доступную (высококонтрастную) версии, управление новостями с разграничением прав, поиск, карту сайта, страницу 404, контактную форму с сохранением сообщений и авторизацией по ролям.

## Быстрый старт
1. Установите зависимости:
   ```bash
   python -m venv .venv
   source .venv/bin/activate
   pip install -r requirements.txt
   ```
2. Запустите приложение:
   ```bash
   FLASK_APP=app.py FLASK_DEBUG=true flask run --host=0.0.0.0 --port=5000
   ```
3. Откройте сайт в браузере: http://localhost:5000

## Учётные данные
- Администратор: `admin@citygreenhub.example` / `adminpass`
- Редактор: `editor@citygreenhub.example` / `editorpass`
- Зарегистрированный пользователь: создаётся через `/register`, роль `member` (общий доступ без админ-функций)

Роли и доступ:
- admin: полный доступ, удаление новостей и сообщений.
- editor: создание и редактирование новостей, просмотр сообщений.
- member: общая версия сайта.

Авторизованные пользователи с ролями admin или editor получают доступ к разделу «Полученные сообщения» (/messages). Управление новостями доступно на `/manage/news`.

## Страницы
- Главная, О проекте, Решения, Статьи, Практики, Ресурсы, Новости, Контакты.
- Карта сайта доступна по `/sitemap`, страница 404 — кастомная и возвращается для несуществующих адресов.
- Поиск по статьям и новостям доступен из шапки сайта.

## Темы оформления
- Стандартный режим по умолчанию.
- Версия для слабовидящих переключается кнопкой в шапке и запоминается в `localStorage`.
- В режиме для слабовидящих доступен контроллер изменения цветовой схемы (жёлтый/чёрный по ГОСТ, синий/белый, сепия), размера шрифта и межстрочного интервала.

## Деплой
Приложение готово к упаковке в Docker или размещению на любом хостинге с поддержкой Python. Для production рекомендуется:
- Задать переменную `SECRET_KEY` через переменные окружения.
- Хранить SQLite-файл за пределами репозитория или использовать PostgreSQL/MySQL в многопользовательском окружении.
- Настроить обратный прокси (Nginx) и HTTPS.

### База данных
- SQLite-файл создаётся автоматически при старте приложения в `instance/citygreenhub.sqlite` и не хранится в репозитории.
- Схема включает таблицы `users`, `news` и `messages`. При первом запуске автоматически добавляются администратор, редактор и пять новостей.
- Для сброса данных удалите файл `instance/citygreenhub.sqlite` и перезапустите приложение или выполните `flask --app app reset-db` — таблицы и тестовые записи будут созданы снова.

## Дополнительно
- Контент организован по двум разделам (Аналитика и Практики) с пятью статьями в каждом, плюс лента из пяти новостей.
- Формы и ссылки снабжены семантическими стилями для удобства чтения и переключения темы.
